(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[313],{1226:function(e,n,t){"use strict";var r=t(9499),o=t(4730),c=t(8728),i=t(7294),a=t(795),u=t(9977),s=["variant","size","block","sx","disabled","href","target"];function l(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function d(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?l(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}n.Z=function(e){var n=e.variant,t=void 0===n?"primary":n,r=e.size,l=void 0===r?"md":r,f=e.block,p=void 0!==f&&f,b=e.sx,g=void 0===b?{}:b,m=e.disabled,y=e.href,h=e.target,v=(0,o.Z)(e,s),w=(0,i.useRef)(null),x=d(d({display:"inline-flex",cursor:"pointer",textTransform:"uppercase",alignItems:"center",justifyContent:"center",width:p?"100%":"auto",m:0,border:0,borderRadius:4,textDecoration:"none",fontFamily:"body","&:hover":{opacity:.8}},(0,c.Z)(["buttons.".concat(m?"disabled":t),"buttons.sizes.".concat(l),"".concat("unstyled"===t?"buttons.unstyled":"")])),g);return y?(0,u.tZ)(a.rU,d(d({href:y,sx:x,target:h},v),{},{children:v.children})):(0,u.tZ)(a.zx,d(d({},v),{},{sx:x,ref:w,disabled:m,children:v.children}))}},4024:function(e,n,t){"use strict";t.d(n,{W:function(){return p},Z:function(){return b}});var r=t(9499),o=t(7257),c=t(9046),i=t(8428),a=t(7294),u=t(795),s=t(6033),l=t(9977);function d(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function f(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?d(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):d(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var p={dialog:{width:["100%",500],height:"90vh",margin:"0 auto",backgroundColor:"white",boxShadow:"0px 4px 74px 0px #00000026",borderRadius:8,display:"flex",flexDirection:"column"},dialogExpanded:{width:["100%","100%","100%",950],minHeight:"auto"},header:{position:"sticky",zIndex:1,top:0},topHeader:{display:"flex",alignItems:"center",justifyContent:"space-between",minHeight:52,pl:3,pr:1,borderBottom:"1px solid",borderColor:"gray.200",backgroundColor:"white",borderTopLeftRadius:8,borderTopRightRadius:8},footer:{position:"sticky",zIndex:1,bottom:0},logo:{display:"flex",alignItems:"center",justifyContent:"center"},logoText:{ml:1,fontSize:1,color:"gray.500",marginTop:1},closeButton:{width:30,height:30,display:"flex",alignItems:"center",justifyContent:"center"},"closeButton:hover":{opacity:.5},body:{pt:40,px:[15,30],pb:0,display:"flex",flexDirection:"column",flex:1,overflowY:"auto"}};function b(e){var n=e.title,t=e.header,r=e.footer,d=e.root,b=e.children,g=(0,a.useRef)(null),m=function(){return c.WalletUtils.close()},y=(0,i.Z)(),h=y.isExpanded,v=y.setCodePreview;return(0,l.BX)(o.V,{open:!0,onClose:m,sx:f(f({},p.dialog),h?p.dialogExpanded:{}),initialFocus:g,children:[(0,l.tZ)(o.V.Overlay,{}),(0,l.BX)("div",{sx:f(f({},p.header),{},{mb:h?0:p.header.mb}),children:[(0,l.BX)("div",{sx:p.topHeader,children:[(0,l.BX)("div",{sx:p.logo,children:[(0,l.tZ)("img",{src:"/flow-logo.svg"}),(0,l.tZ)("span",{sx:p.logoText,children:["FCL Dev Wallet",n].filter(Boolean).join(" - ")})]}),h?(0,l.tZ)(u.xu,{mr:2,children:(0,l.tZ)(s.Z,{onClick:function(){return v(null)}})}):(0,l.tZ)(u.zx,{variant:"unstyled",onClick:m,sx:p.closeButton,ref:g,children:(0,l.tZ)("img",{src:"/x-icon.svg"})})]}),t]}),d?b:(0,l.BX)(l.HY,{children:[(0,l.tZ)("div",{sx:f(f({},p.body),{},{pt:h?0:p.body.pt,pb:h?0:p.body.pb}),children:b}),(0,l.tZ)("div",{sx:p.footer,children:r})]})]})}},6033:function(e,n,t){"use strict";t.d(n,{Z:function(){return a}});var r=t(8428),o=t(795),c=t(1226),i=t(9977);function a(e){var n=e.onClick,t=(0,r.Z)().isExpanded;return(0,i.BX)(c.Z,{variant:"link",size:"xs",onClick:n,children:[t?"collapse":"expand",(0,i.tZ)(o.kC,{ml:2,sx:{alignItems:"center",justifyContent:"center"},children:(0,i.tZ)("img",{src:"/".concat(t?"collapse":"expand",".svg")})})]})}},7615:function(e,n,t){"use strict";t.d(n,{H:function(){return a},w:function(){return u}});var r=t(9046),o=t(6520),c=t(7294),i=t(5893),a=(0,c.createContext)({currentUser:{},proposer:{},payer:{},authorizers:[],roles:{},proposalKey:{address:"",keyId:0,sequenceNum:0},args:[],cadence:"",computeLimit:0,refBlock:"",message:"",codePreview:null,setCodePreview:function(){return null},isExpanded:!1,connectedAppConfig:void 0});function u(e){var n=e.children,t=(0,c.useState)(null),u=t[0],s=t[1],l=(0,c.useState)(null),d=l[0],f=l[1],p=(0,o.Z)().data;(0,c.useEffect)((function(){r.WalletUtils.ready((function(e){s(e.body)}))}),[]);var b=(0,c.useMemo)((function(){if(!p)return{};var e={};return p.forEach((function(n){return e[n.address]=n})),e}),[p]);if(!u||0===Object.entries(b).length)return null;var g=u.addr,m=u.voucher,y=u.roles,h=u.message,v=localStorage.getItem("connectedAppConfig"),w={currentUser:b[r.withPrefix(g)],proposer:b[r.withPrefix(m.proposalKey.address)],payer:b[r.withPrefix(m.payer)],authorizers:m.authorizers.map((function(e){return b[r.withPrefix(e)]})),roles:y,proposalKey:m.proposalKey,args:m.arguments,cadence:m.cadence,computeLimit:m.computeLimit,refBlock:m.refBlock,message:h,codePreview:d,setCodePreview:f,isExpanded:null!==d,connectedAppConfig:v?JSON.parse(v):void 0,appTitle:"Test Harness",appIcon:"https://placekitten.com/g/200/200"};return(0,i.jsx)(a.Provider,{value:w,children:n})}},6520:function(e,n,t){"use strict";t.d(n,{Z:function(){return c}});var r=t(7294),o=t(1864);function c(){var e=(0,r.useState)([]),n=e[0],t=e[1],c=(0,r.useState)(null),i=c[0],a=c[1],u=(0,r.useState)(!0),s=u[0],l=u[1];function d(){(0,o.T8)().then((function(e){t(e)})).catch((function(e){a(e)})).finally((function(){return l(!1)}))}return(0,r.useEffect)((function(){d()}),[]),{data:n,error:i,isLoading:s,refresh:d}}},8428:function(e,n,t){"use strict";var r=t(7615),o=t(7294);n.Z=function(){return(0,o.useContext)(r.H)}},8728:function(e,n,t){"use strict";t.d(n,{Z:function(){return s}});var r=t(9499),o=t(1966),c=t(8710),i=t(3431);function a(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function u(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?a(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function s(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];var r=(0,o.V)(n),a={};return r.map((function(e){a=u(u({},a),(0,i.U2)(c.Z,e))})),a}},1864:function(e,n,t){"use strict";t.d(n,{kh:function(){return T},D0:function(){return w},u1:function(){return E},T8:function(){return k},d2:function(){return O},sG:function(){return S}});var r=t(7812),o=t(29),c=t(7794),i=t.n(c),a=t(9046),u=t(6060),s="import FCL from 0xSERVICE\n\npub fun main(): [FCL.Account] {\n  return FCL.accounts().values\n}\n",l="pub fun main(address: Address): PublicAccount {\n  return getAccount(address)\n}\n",d="import FungibleToken from 0xFUNGIBLETOKENADDRESS\n\npub fun main(addr: Address): UFix64 {\n  return getAccount(addr)\n    .getCapability<&{FungibleToken.Balance}>(/public/fusdBalance)\n    .borrow()?.balance ?? 0.0\n}\n",f="import FCL from 0xSERVICE\n\ntransaction(label: String, scopes: [String]) {\n  prepare() {\n    FCL.new(label: label, scopes: scopes, address: nil)\n  }\n}\n",p="import FCL from 0xSERVICE\n\ntransaction(address: Address, label: String, scopes: [String]) {\n  prepare() {\n    FCL.update(address: address, label: label, scopes: scopes)\n  }\n}\n",b=t(1752),g=t(6012),m=t(8459),y=t(6879),h=t(6873),v=(0,b.default)().publicRuntimeConfig;function w(e){return x.apply(this,arguments)}function x(){return(x=(0,o.Z)(i().mark((function e(n){var t,r,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.BR)();case 2:return t=e.sent,r=t.flowAccountAddress,o=t.flowAccessNode,(0,y.Z)(o,r,v.contractFungibleToken,v.contractFlowToken,v.contractFUSD),e.next=8,a.send([a.script(l),a.args([a.arg(n,u.Address)])]).then(a.decode);case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(){return A.apply(this,arguments)}function A(){return(A=(0,o.Z)(i().mark((function e(){var n,t,o,c,u,l;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.BR)();case 2:return n=e.sent,t=n.flowAccountAddress,o=n.flowAccessNode,(0,y.Z)(o,t,v.contractFungibleToken,v.contractFlowToken,v.contractFUSD),e.next=8,a.send([a.script(s)]).then(a.decode);case 8:return c=e.sent,u=c.find((function(e){return e.address===t})),l=c.filter((function(e){return e.address!==t})).sort((function(e,n){return e.label.localeCompare(n.label)})),e.abrupt("return",[u].concat((0,r.Z)(l)));case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(e,n){return F.apply(this,arguments)}function F(){return(F=(0,o.Z)(i().mark((function e(n,t){var r,o,c,s,l,d,p,b,w;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.BR)();case 2:return o=e.sent,c=o.flowAccountAddress,s=o.flowAccessNode,l=o.flowAccountPrivateKey,(0,y.Z)(s,c,v.contractFungibleToken,v.contractFlowToken,v.contractFUSD),e.next=9,(0,g.w)(c,v.flowAccountKeyId,l);case 9:return d=e.sent,e.next=12,a.send([a.transaction(f),a.args([a.arg(n,u.String),a.arg(t,u.Array(u.String))]),a.proposer(d),a.payer(d),a.limit(100)]).then(a.decode);case 12:return p=e.sent,e.next=15,a.tx(p).onceSealed();case 15:if(b=e.sent,null!==(w=b.events.find((function(e){return e.type===m.y$.accountCreated})))&&void 0!==w&&null!==(r=w.data)&&void 0!==r&&r.address){e.next=19;break}throw"Account address not created";case 19:return e.abrupt("return",w.data.address);case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(e,n,t){return D.apply(this,arguments)}function D(){return(D=(0,o.Z)(i().mark((function e(n,t,r){var o,c,s,l,d,f;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.BR)();case 2:return o=e.sent,c=o.flowAccountAddress,s=o.flowAccessNode,l=o.flowAccountPrivateKey,n=a.withPrefix(n),(0,y.Z)(s,c,v.contractFungibleToken,v.contractFlowToken,v.contractFUSD),e.next=10,(0,g.w)(c,v.flowAccountKeyId,l);case 10:return d=e.sent,e.next=13,a.send([a.transaction(p),a.args([a.arg(n,u.Address),a.arg(t,u.String),a.arg(r,u.Array(u.String))]),a.proposer(d),a.payer(d),a.limit(100)]).then(a.decode);case 13:return f=e.sent,e.next=16,a.tx(f).onceSealed();case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var j={FLOW:v.tokenAmountFLOW,FUSD:v.tokenAmountFUSD},P={FLOW:{tx:'import FlowToken from 0xFLOWTOKENADDRESS\nimport FungibleToken from 0xFUNGIBLETOKENADDRESS\n\ntransaction(address: Address, amount: UFix64) {\n  let tokenAdmin: &FlowToken.Administrator\n  let tokenReceiver: &{FungibleToken.Receiver}\n\n  prepare(signer: AuthAccount) {\n\t\tself.tokenAdmin = signer\n\t\t  .borrow<&FlowToken.Administrator>(from: /storage/flowTokenAdmin)\n\t\t  ?? panic("Signer is not the token admin")\n\n\t\tself.tokenReceiver = getAccount(address)\n\t\t  .getCapability(/public/flowTokenReceiver)!\n\t\t  .borrow<&{FungibleToken.Receiver}>()\n\t\t  ?? panic("Unable to borrow receiver reference")\n\t}\n\n\texecute {\n\t\tlet minter <- self.tokenAdmin.createNewMinter(allowedAmount: amount)\n\t\tlet mintedVault <- minter.mintTokens(amount: amount)\n\n\t\tself.tokenReceiver.deposit(from: <-mintedVault)\n\n\t\tdestroy minter\n\t}\n}\n',amount:j[m.qX]},FUSD:{tx:'import FUSD from 0xFUSDADDRESS\nimport FungibleToken from 0xFUNGIBLETOKENADDRESS\n\npub fun hasFUSD(_ address: Address): Bool {\n  let receiver = getAccount(address)\n    .getCapability<&FUSD.Vault{FungibleToken.Receiver}>(/public/fusdReceiver)\n    .check()\n\n  let balance = getAccount(address)\n    .getCapability<&FUSD.Vault{FungibleToken.Balance}>(/public/fusdBalance)\n    .check()\n\n  return receiver && balance\n}\n\npub fun initFUSD(_ acct: AuthAccount) {\n  if acct.borrow<&FUSD.Vault>(from: /storage/fusdVault) == nil {\n    acct.save(<-FUSD.createEmptyVault(), to: /storage/fusdVault)\n  }\n  acct.unlink(/public/fusdReceiver)\n  acct.unlink(/public/fusdBalance)\n  acct.link<&FUSD.Vault{FungibleToken.Receiver}>(/public/fusdReceiver, target: /storage/fusdVault)\n  acct.link<&FUSD.Vault{FungibleToken.Balance}>(/public/fusdBalance, target: /storage/fusdVault)\n}\n\ntransaction(address: Address, amount: UFix64) {\n  let tokenAdmin: &FUSD.Administrator\n  let tokenReceiver: &{FungibleToken.Receiver}\n\n  prepare(minterAccount: AuthAccount, receiverAccount: AuthAccount) {\n    if !hasFUSD(receiverAccount.address) {\n      initFUSD(receiverAccount)\n    }\n\n    self.tokenAdmin = minterAccount\n      .borrow<&FUSD.Administrator>(from: FUSD.AdminStoragePath)\n        ?? panic("minterAccount is not the token admin")\n\n    self.tokenReceiver = getAccount(address)\n      .getCapability(/public/fusdReceiver)!\n      .borrow<&{FungibleToken.Receiver}>()\n      ?? panic("Unable to borrow receiver reference")\n  }\n\n  execute {\n    let minter <- self.tokenAdmin.createNewMinter()\n    let mintedVault <- minter.mintTokens(amount: amount)\n\n    self.tokenReceiver.deposit(from: <-mintedVault)\n    destroy minter\n  }\n}\n',amount:j[m.JA]}};function T(e,n){return C.apply(this,arguments)}function C(){return(C=(0,o.Z)(i().mark((function e(n,t){var r,o,c,s,l,d,f,p,b,w,x;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.BR)();case 2:if(r=e.sent,o=r.flowAccountAddress,c=r.flowAccessNode,s=r.flowAccountPrivateKey,(0,y.Z)(c,o,v.contractFungibleToken,v.contractFlowToken,v.contractFUSD),["FUSD","FLOW"].includes(t)){e.next=9;break}throw"Incorrect TokenType";case 9:return e.next=11,(0,g.w)(o,v.flowAccountKeyId,s);case 11:return l=e.sent,e.next=14,(0,g.w)(n,v.flowAccountKeyId,s);case 14:return d=e.sent,p=(f=P[t]).tx,b=f.amount,w=t===m.JA?[l,d]:[l],e.next=19,a.send([a.transaction(p),a.args([a.arg(n,u.Address),a.arg(b,u.UFix64)]),a.proposer(l),a.authorizations(w),a.payer(l),a.limit(9999)]).then(a.decode);case 19:return x=e.sent,e.next=22,a.tx(x).onceSealed();case 22:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(e){return Z.apply(this,arguments)}function Z(){return(Z=(0,o.Z)(i().mark((function e(n){var t,r,o,c;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.BR)();case 2:return t=e.sent,r=t.flowAccountAddress,o=t.flowAccessNode,(0,y.Z)(o,r,v.contractFungibleToken,v.contractFlowToken,v.contractFUSD),e.next=8,a.send([a.script(d),a.args([a.arg(n,u.Address)])]).then(a.decode);case 8:return c=e.sent,e.abrupt("return",c);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},6012:function(e,n,t){"use strict";t.d(n,{w:function(){return d}});var r=t(9499),o=t(29),c=t(7794),i=t.n(c),a=t(9046),u=t(6917);function s(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?s(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function d(e,n,t){return f.apply(this,arguments)}function f(){return(f=(0,o.Z)(i().mark((function e(n,t,r){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(function(e){return l(l({},e),{},{tempId:"SERVICE_ACCOUNT",addr:a.sansPrefix(n),keyId:Number(t),signingFunction:function(e){return{addr:a.withPrefix(n),keyId:Number(t),signature:(0,u.X)(r,e.message)}}})}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},8459:function(e,n,t){"use strict";t.d(n,{Fw:function(){return c},HN:function(){return o},JA:function(){return u},jQ:function(){return i},qX:function(){return a},y$:function(){return r}});var r={accountCreated:"flow.AccountCreated"},o="Label is required.",c="Service Account",i="Untitled Dapp",a="FLOW",u="FUSD"},6917:function(e,n,t){"use strict";t.d(n,{X:function(){return s},n:function(){return u}});var r=t(1160),o=t(6266),c=t(5682),i=t(8764).Buffer,a=new o.ec("p256"),u=function(e){return(0,r.z)(e,r.kH,r.pk,1e3)};function s(e,n){var t=a.keyFromPrivate(i.from(e,"hex")).sign(function(e){var n=new c.Aj(256);return n.update(i.from(e,"hex")),n.digest()}(n)),r=t.r.toArrayLike(i,"be",32),o=t.s.toArrayLike(i,"be",32);return i.concat([r,o]).toString("hex")}},6879:function(e,n,t){"use strict";t.d(n,{Z:function(){return o}});var r=t(9046);function o(e,n,t,o,c){(0,r.config)().put("accessNode.api",e).put("0xSERVICE",n).put("0xFUNGIBLETOKENADDRESS",t).put("0xFLOWTOKENADDRESS",o).put("0xFUSDADDRESS",c)}},6601:function(){},9214:function(){}}]);
//# sourceMappingURL=313-f9e98a1155e3cdc2.js.map