(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[601],{628:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var r=n(9499),o=n(9046),c=n(3324),i=n(9977);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var l={border:"1px solid",borderColor:"gray.200",backgroundColor:"white",display:"flex",alignItems:"center",overflow:"hidden","> img":{width:"100%"}};function u(e){var t=e.address,n=void 0===t?"":t,r=e.src,a=e.seed,u=e.sxStyles,d=void 0===u?{}:u,f=e.lg,p=e.flowAccountAddress,h=e.avatarUrl,b=f?65:50,g=o.withPrefix(n),v=g===o.withPrefix(p),m=v?"/settings.svg":function(e,t){return encodeURI("".concat(e,"avatar/").concat(t,".svg"))}(h,"".concat(g,"-").concat(a));return(0,i.tZ)("div",{sx:s(s(s({},l),d),{},{width:b,height:b,borderRadius:b,border:v?0:d.border||l.border}),children:(0,i.tZ)(c.Img,{src:[r||m,"/missing-avatar-icon.svg"]})})}},4528:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var r=n(9977),o={image:{borderRadius:65,width:65}};function c(e){var t=e.icon,n=t||"/missing-app-icon.svg";return(0,r.tZ)("img",{src:n,sx:o.image,title:t?void 0:"Missing app icon"})}},1117:function(e,t,n){"use strict";var r=n(6873),o=n(7294);t.Z=function(){return(0,o.useContext)(r.E_)}},8535:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Te}});var r=n(29),o=n(7794),c=n.n(o),i=n(9499),a=n(8728),s=n(795),l=n(9977);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f=function(e){var t=e.onClick,n=e.defaultChecked,r=void 0!==n&&n,o=e.variant,c=void 0===o?"primary":o,i=e.size,u=void 0===i?"lg":i,f=e.sx,p=void 0===f?{}:f,h=e.id,b=void 0===h?"":h,g=(0,a.Z)(["forms.switch.".concat(c),"forms.switch.sizes.".concat(u)]);return(0,l.tZ)(s.rs,{onClick:t,defaultChecked:r,sx:d(d({},p),g),id:b,role:"switch"})},p=n(9046),h=n(7294),b=n(2626);var g=n(7812),v=n(6060),m=n(6873),y=n(1752),x='pub contract FCL {\n  pub let storagePath: StoragePath\n\n  pub struct Account {\n    pub let type: String\n    pub let address: Address\n    pub let keyId: Int\n    pub var label: String\n    pub var scopes: [String]\n\n    init(address: Address, label: String, scopes: [String]) {\n      self.type = "ACCOUNT"\n      self.address = address\n      self.keyId = 0\n      self.label = label\n      self.scopes = scopes\n    }\n\n    pub fun update(label: String, scopes: [String]) {\n      self.label = label\n      self.scopes = scopes\n    }\n  }\n\n  pub resource Root {\n    pub let key: [UInt8]\n    pub let accounts: {Address: Account}\n\n    init (_ key: String) {\n      self.key = key.decodeHex()\n      self.accounts = {}\n    }\n\n    pub fun add(_ acct: Account) {\n      self.accounts[acct.address] = acct\n    }\n\n    pub fun update(address: Address, label: String, scopes: [String]) {\n      let acct = self.accounts[address]\n      acct!.update(label: label, scopes: scopes)\n      self.accounts[address] = acct\n    }\n  }\n\n  pub fun accounts(): {Address: Account} {\n    return self.account.borrow<&Root>(from: self.storagePath)!.accounts\n  }\n\n  pub fun getServiceKey(): [UInt8] {\n    return self.account.borrow<&Root>(from: self.storagePath)!.key\n  }\n\n  pub fun new(label: String, scopes: [String], address: Address?): AuthAccount {\n    let acct = AuthAccount(payer: self.account)\n    acct.addPublicKey(self.getServiceKey())\n\n    self.account\n      .borrow<&Root>(from: self.storagePath)!\n      .add(Account(address: address ?? acct.address, label: label, scopes: scopes))\n\n    return acct\n  }\n\n  pub fun update(address: Address, label: String, scopes: [String]) {\n    self.account.borrow<&Root>(from: self.storagePath)!\n      .update(address: address, label: label, scopes: scopes)\n  }\n\n  init (key: String, initAccountsLabels: [String]) {\n    self.storagePath = /storage/FCL_DEV_WALLET\n    self.account.save(<- create Root(key), to: self.storagePath)\n\n    self.new(label: initAccountsLabels[0], scopes: [], address: self.account.address)\n    var acctInitIndex = 1\n    while acctInitIndex < initAccountsLabels.length {\n      self.new(label: initAccountsLabels[acctInitIndex], scopes: [], address: nil)\n      acctInitIndex = acctInitIndex + 1\n    }\n  }\n}\n',w='transaction(code: String, key: String, initAccountsLabels: [String]) {\n  prepare(acct: AuthAccount) {\n    acct.contracts.add(name: "FCL", code: code.decodeHex(), key: key, initAccountsLabels: initAccountsLabels)\n  }\n}\n',O=n(3848),A=n.n(O),Z=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];function S(e){var t=new(A())(Z);return"Account ".concat(t.nameForId(e))}var C=n(6012),j=n(8459),k=n(6917),P=n(6879),B=n(8764).Buffer,I=(0,y.default)().publicRuntimeConfig;function _(e){return D.apply(this,arguments)}function D(){return(D=(0,r.Z)(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.send([p.getAccount(t)]).then(p.decode);case 3:if(!e.sent.contracts.FCL){e.next=6;break}return e.abrupt("return",!0);case 6:return e.abrupt("return",!1);case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}function E(){return R.apply(this,arguments)}function R(){return(R=(0,r.Z)(c().mark((function e(){var t,n,r,o,i,a,s,l,u;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,m.BR)();case 2:return t=e.sent,n=t.flowAccessNode,r=t.flowAccountAddress,o=t.flowAccountPrivateKey,i=t.flowAccountPublicKey,(0,P.Z)(n,r,I.contractFungibleToken,I.contractFlowToken,I.contractFUSD),e.next=10,_(r);case 10:if(!e.sent){e.next=13;break}return e.abrupt("return");case 13:return a=(0,g.Z)(Array(I.flowInitAccountsNo)).map((function(e,t){return S(t)})),s=[j.Fw].concat((0,g.Z)(a)),e.next=17,(0,C.w)(r,I.flowAccountKeyId,o);case 17:return l=e.sent,e.next=20,p.send([p.transaction(w),p.args([p.arg(B.from(x,"utf8").toString("hex"),v.String),p.arg((0,k.n)(i),v.String),p.arg(s,v.Array(v.String))]),p.proposer(l),p.payer(l),p.authorizations([l]),p.limit(200)]).then(p.decode);case 20:return u=e.sent,e.next=23,p.tx(u).onceSealed();case 23:p.account(r).then((function(e){console.log("ACCOUNT",Object.keys(e.contracts))}));case 24:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var L=n(5893),U=(0,h.createContext)({connectedAppConfig:{},appScopes:[],initError:null});function z(e){var t=e.children,n=(0,h.useState)(!1),o=n[0],i=n[1],a=(0,h.useState)(null),s=a[0],l=a[1],u=function(){var e,t,n=(0,h.useState)(null),r=n[0],o=n[1];return(0,h.useEffect)((function(){p.WalletUtils.ready((function(e){o(e)}))}),[]),{connectedAppConfig:r,appScopes:(0,b.v)(null===r||void 0===r||null===(e=r.config)||void 0===e||null===(t=e.services)||void 0===t?void 0:t["OpenID.scopes"])}}(),d=u.connectedAppConfig,f=u.appScopes;if((0,h.useEffect)((function(){function e(){return(e=(0,r.Z)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E();case 3:i(!0),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),l("Dev wallet initialization failed: ".concat(e.t0));case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),!o||!d)return null;var g={connectedAppConfig:d,appScopes:f,initError:s};return(0,L.jsx)(U.Provider,{value:g,children:t})}var X=function(){return(0,h.useContext)(U)},F=n(7058);function W(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var T={headingContainer:{display:"flex",alignItems:"center",justifyContent:"space-between"},heading:{textTransform:"uppercase",color:"gray.400",fontWeight:"normal",fontSize:0,letterSpacing:"0.05em"}};function M(e){var t=e.compact,n=e.children;return(0,l.tZ)("div",{sx:N(N({},T.headingContainer),{},{height:t?30:40}),children:(0,l.tZ)("div",{sx:T.heading,children:n})})}function K(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function H(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?K(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var q={headingContainer:{display:"flex",alignItems:"center",justifyContent:"space-between"},heading:{textTransform:"uppercase",color:"gray.400",fontWeight:"normal",fontSize:0,letterSpacing:"0.05em"},label:{textTransform:"capitalize",margin:0},scope:{height:40,display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:"1px solid",borderColor:"gray.200"}};function G(e){var t=e.scopes,n=e.setScopes,r=e.compact,o=void 0!==r&&r,c=X().appScopes;return(0,l.BX)("div",{id:"scopes",children:[(0,l.tZ)(M,{compact:o,children:c.length>0&&"Scopes"}),c.length>0&&(0,l.BX)(l.HY,{children:[(0,l.tZ)(F.Ge.hr,{sx:{backgroundColor:"gray.400",mt:0,mb:o?1:3}}),c.map((function(e){return(0,l.tZ)("div",{children:(0,l.BX)("div",{sx:H(H({},q.scope),{},{paddingBottom:o?1:3}),children:[(0,l.tZ)(s.__,{htmlFor:"scope-".concat(e),sx:q.label,children:e}),(0,l.tZ)("div",{sx:{display:"inline-flex"},children:(0,l.tZ)(f,{size:"lg",id:"scope-".concat(e),defaultChecked:t.has(e),onClick:function(){return function(e){t.has(e)?t.delete(e):t.add(e),n(t)}(e)},"aria-checked":"true"})})]})},e)}))]})]})}var V=n(628),Y=n(743).B7;var J=function(e){var t,n,r=e.active,o=Y().theme;return(0,L.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",fill:"none",viewBox:"0 0 22 22",children:(0,L.jsx)("path",{stroke:r?null===(t=o.colors)||void 0===t?void 0:t.green:null===(n=o.colors)||void 0===n?void 0:n.gray[500],strokeLinecap:"round",strokeLinejoin:"round",d:"M11 21c5.523 0 10-4.477 10-10S16.523 1 11 1 1 5.477 1 11s4.477 10 10 10zM11 15v-4M11 7v-.5"})})},Q=n(4528),$={container:{textAlign:"center",position:"relative"},info:{textAlign:"left",fontSize:1,color:"textMedium",marginTop:-2},infoLabel:{opacity:.8},imageContainer:{width:65,height:65,display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",margin:"0 auto"},title:{marginTop:3,marginBottom:2},image:{borderRadius:65,width:65},description:{maxWidth:340,margin:"0 auto"},externalAddressLink:{ml:1,color:"blue",fontSize:1},externalLinkImage:{ml:2,position:"relative",top:"1px"},infoButton:{position:"absolute",right:0,display:"flex",alignItems:"center",justifyContent:"center"},missingAppDetail:{color:"red.200",display:"inline-flex",alignItems:"center"}};function ee(e){var t=e.text;return(0,l.BX)("div",{sx:$.missingAppDetail,children:[t,(0,l.tZ)(s.rU,{href:"https://docs.onflow.org/fcl/api/#common-configuration-keys",target:"_blank",sx:{ml:1,color:"blue"},children:"Learn More"})]})}function te(e){var t=e.title,n=e.description,r=e.info,o=void 0===r||r,c=e.account,i=e.flowAccountAddress,a=e.avatarUrl,u=(0,h.useState)(!1),d=u[0],f=u[1],p=X().connectedAppConfig.config.app,b=p.icon,g=p.title;return(0,l.BX)("div",{sx:$.container,children:[o&&(0,l.tZ)("div",{id:"info",children:d&&(0,l.BX)("div",{sx:$.info,children:[(0,l.BX)("div",{children:[(0,l.tZ)("span",{sx:$.infoLabel,children:"app.detail.icon:"})," ",b||(0,l.tZ)(ee,{text:"Missing, please include an icon."})]}),(0,l.BX)("div",{children:[(0,l.tZ)("span",{sx:$.infoLabel,children:"app.detail.title:"})," ",g||(0,l.tZ)(ee,{text:"Untitled, please include a title."})]}),(0,l.tZ)(F.Ge.hr,{})]})}),(0,l.BX)("div",{children:[o&&(0,l.tZ)(s.zx,{variant:"unstyled",sx:$.infoButton,onClick:function(){return f((function(e){return!e}))},"aria-controls":"info","aria-expanded":d,children:(0,l.tZ)(J,{active:d})}),(0,l.tZ)("div",{sx:$.imageContainer,children:null!==c&&void 0!==c&&c.address?(0,l.tZ)(V.Z,{address:c.address,seed:g,lg:!0,flowAccountAddress:i,avatarUrl:a}):(0,l.tZ)(Q.Z,{icon:b})}),(0,l.tZ)(F.Ge.h1,{sx:$.title,children:t||g||j.jQ}),!!n&&(0,l.tZ)(F.Ge.p,{sx:$.description,children:n})]})]})}var ne=n(4024),re=function(e){var t=e.children;return(0,l.tZ)("div",{sx:{border:"1px solid",borderColor:"red.200",backgroundColor:"red.100",borderBottomLeftRadius:4,borderBottomRightRadius:4,color:"red.200",marginTop:"-1px",px:"20px",py:3,"> a":{color:"red.200"}},children:t})};function oe(e){var t=e.errors;return(0,l.tZ)(s.xu,{mt:3,mb:4,children:(0,l.tZ)(re,{children:t.join(". ")})})}var ce=n(2580),ie=n(1864),ae=n(4231),se={label:ae.Z_().required(j.HN)},le=ae.Ry().shape(se);function ue(e){var t=(0,h.useState)(null),n=t[0],r=t[1],o=(0,h.useState)(null),c=o[0],i=o[1],a=(0,h.useState)(!0),s=a[0],l=a[1];function u(){(0,ie.D0)(e).then((function(e){r(e)})).catch((function(e){i(e)})).finally((function(){return l(!1)}))}return(0,h.useEffect)((function(){u()}),[]),{data:n,error:c,isLoading:s,refresh:u}}var de=n(6835);function fe(e){if(0===e.length)return"0";var t=e.split("."),n=(0,de.Z)(t,2),r=n[0],o=n[1];return[parseFloat(r).toLocaleString("en-US"),null===o||void 0===o?void 0:o.replace(/0+$/,"")].filter(Boolean).join(".")}var pe=n(1226),he={label:{textTransform:"capitalize",margin:0,marginRight:"auto"},accountSection:{height:50,display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:"1px solid",borderColor:"gray.200"},balance:{fontSize:1},fundButton:{fontWeight:"bold",fontSize:0,color:"black",ml:4,px:30,py:"7px",borderColor:"gray.200"}};function be(e){var t=e.address,n=e.flowAccountAddress,o=function(e){var t=(0,h.useState)(null),n=t[0],r=t[1],o=(0,h.useState)(null),c=o[0],i=o[1],a=(0,h.useState)(!0),s=a[0],l=a[1];function u(){(0,ie.u1)(e).then((function(e){r(e)})).catch((function(e){i(e)})).finally((function(){return l(!1)}))}return(0,h.useEffect)((function(){u()}),[]),{data:n,error:c,isLoading:s,refresh:u}}(t),i=o.data,a=o.refresh,u=ue(t),d=u.data,f=u.refresh,b=p.withPrefix(t)===p.withPrefix(n),g=function(){var e=(0,r.Z)(c().mark((function e(n){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,ie.kh)(t,n);case 2:f(),a();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,l.BX)(l.HY,{children:[(0,l.tZ)(M,{compact:!0,children:"Funds"}),(0,l.tZ)(F.Ge.hr,{sx:{backgroundColor:"gray.400",m:0}}),(0,l.BX)("div",{sx:he.accountSection,children:[(0,l.tZ)(s.__,{sx:he.label,children:"FLOW"}),(0,l.tZ)("div",{sx:he.balance,children:null!==d&&void 0!==d&&d.balance?fe(d.balance):"0"}),!b&&(0,l.tZ)(pe.Z,{variant:"ghost",size:"xs",onClick:function(){return g(j.qX)},sx:he.fundButton,type:"button",children:"Fund"})]}),(0,l.BX)("div",{sx:he.accountSection,children:[(0,l.tZ)(s.__,{sx:he.label,children:"FUSD"}),(0,l.tZ)("div",{sx:he.balance,children:i&&fe(i.toString())}),!b&&(0,l.tZ)(pe.Z,{variant:"ghost",size:"xs",onClick:function(){return g(j.JA)},sx:he.fundButton,type:"button",children:"Fund"})]})]})}var ge={actionsContainer:{display:"flex",alignItems:"center",width:"100%",borderTop:"1px solid",borderColor:"gray.200",backgroundColor:"white",borderBottomLeftRadius:10,borderBottomRightRadius:10,px:[10,20]},actions:{display:"flex",flex:1,pt:20,pb:20}};var ve=function(e){var t=e.account,n=e.onCancel,r=(0,ce.u6)(),o=r.isSubmitting,c=r.isValid,i=r.submitForm;return(0,l.tZ)("div",{sx:ge.actionsContainer,children:(0,l.BX)("div",{sx:ge.actions,children:[(0,l.tZ)(pe.Z,{onClick:n,type:"button",variant:"ghost",block:!0,size:"lg",sx:{flex:1,mr:10,w:"50%"},children:"Cancel"}),(0,l.tZ)(pe.Z,{type:"button",block:!0,size:"lg",sx:{flex:1,ml:10,w:"50%"},disabled:o||!c,onClick:i,children:t.address?"Save":"Create"})]})})},me=n(4730),ye=["required","children"];function xe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function we(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xe(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Oe={required:{color:"red.200",fontWeight:"normal"}},Ae=function(e){var t=e.required,n=void 0!==t&&t,r=e.children,o=(0,me.Z)(e,ye);return(0,l.BX)(s.__,we(we({},o),{},{children:[r,n&&(0,l.tZ)("div",{sx:Oe.required,children:"*"})]}))},Ze=["field","form","inputLabel","required","sx"];function Se(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Se(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Se(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var je={border:"1px solid",borderColor:"red.200",color:"red.200",outlineColor:"red.200",borderBottomLeftRadius:0,borderBottomRightRadius:0,"&:focus, &:focus-visible":{outline:"none",boxShadow:function(e){var t;return"inset 0 0 0 1pt ".concat(null!==(t=e.colors)&&void 0!==t&&t.red?["200"]:"")},borderBottomLeftRadius:0,borderBottomRightRadius:0}},ke=function(e){var t=e.field,n=e.form,r=n.touched,o=n.errors,c=e.inputLabel,i=e.required,a=void 0!==i&&i,u=e.sx,d=void 0===u?{}:u,f=(0,me.Z)(e,Ze),p=r[t.name]&&o[t.name];return(0,l.BX)(l.HY,{children:[(0,l.tZ)(Ae,{required:a,children:c}),(0,l.tZ)(s.II,Ce(Ce(Ce({width:"100%"},t),f),{},{sx:p?Ce(Ce({},d),je):d})),p&&(0,l.tZ)(re,{children:o[t.name]})]})},Pe={form:{position:"relative"},backButton:{background:"none",border:0,position:"absolute",top:0,left:0,cursor:"pointer",p:0,zIndex:10}};function Be(e){var t=e.account,n=e.onSubmitComplete,o=e.onCancel,i=e.flowAccountAddress,a=e.avatarUrl,u=(0,h.useState)([]),d=u[0],f=u[1];return(0,l.tZ)(ce.J9,{initialValues:{label:t.label,scopes:new Set(t.scopes)},validationSchema:le,onSubmit:function(){var e=(0,r.Z)(c().mark((function e(r,o){var i,a,s,l,u;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=r.label,a=r.scopes,s=o.setSubmitting,f([]),l=Array.from(a),e.prev=4,!t.address){e.next=12;break}return e.next=8,(0,ie.sG)(t.address,i,l);case 8:s(!1),n(void 0),e.next=17;break;case 12:return e.next=14,(0,ie.d2)(i,l);case 14:u=e.sent,s(!1),n(u);case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(4),s(!1);case 22:case"end":return e.stop()}}),e,null,[[4,19]])})));return function(t,n){return e.apply(this,arguments)}}(),children:function(e){var n=e.values,r=e.setFieldValue;return(0,l.BX)(l.HY,{children:[(0,l.tZ)("div",{sx:ne.W.body,children:(0,l.BX)(ce.l0,{sx:Pe.form,children:[(0,l.tZ)(pe.Z,{onClick:o,sx:Pe.backButton,children:(0,l.tZ)("img",{src:"/back-arrow.svg"})}),(0,l.tZ)(s.xu,{mb:4,children:(0,l.tZ)(te,{info:!1,account:t,title:t.address?"Manage Account":"Create New Account",description:t.address,flowAccountAddress:i,avatarUrl:a})}),(0,l.tZ)(s.xu,{mb:4,children:(0,l.tZ)(ce.gN,{component:ke,inputLabel:"Label",name:"label",placeholder:"Account label",required:!0})}),!!t.address&&(0,l.tZ)(s.xu,{mb:4,children:(0,l.tZ)(be,{address:t.address,flowAccountAddress:i})}),(0,l.tZ)(s.xu,{mb:5,children:(0,l.tZ)(G,{scopes:n.scopes,setScopes:function(e){return r("scopes",e)},compact:!0})}),d.length>0&&(0,l.tZ)(oe,{errors:d})]})}),(0,l.tZ)("div",{sx:ne.W.footer,children:(0,l.tZ)(ve,{account:t,onCancel:o})})]})}})}var Ie=n(7255),_e={accountListItem:{marginX:-15,paddingX:15,height:90,display:"flex",alignItems:"center",flex:1},accountButtonContainer:{display:"flex",items:"center",alignItems:"center",justifyContent:"space-between",flex:1},accountImage:{marginRight:20},chooseAccountButton:{display:"flex",alignItems:"center",justifyContent:"flex-start",height:66,paddingX:0,color:"colors.black",background:"transparent",border:0,textAlign:"left",fontSize:2,marginRight:10,textTransform:"initial",fontWeight:600,lineHeight:"1.3rem"},chooseAccountAddress:{fontSize:0,color:"gray.600"},chooseAccountFlow:{fontSize:0,color:"gray.600",display:"flex",alignItems:"center"},chooseAccountFlowLabel:{fontWeight:"normal",ml:2},chooseAccountButtonText:{height:"100%",display:"flex",flexDirection:"column",justifyContent:"center"},isNew:{textTransform:"uppercase",backgroundColor:"green",fontSize:11,fontWeight:"bold",borderRadius:14,position:"relative",top:"-2px",py:"1px",px:"7px",ml:2},manageAccountButton:{margin:0,padding:0,fontSize:1,fontWeight:"normal"}};function De(e){var t=e.account,n=e.onEditAccount,r=e.isNew,o=e.flowAccountAddress,c=e.flowAccountPrivateKey,i=e.avatarUrl,a=X().connectedAppConfig,u=a.config.app.title,d=(0,h.useState)(new Set(t.scopes)),f=d[0],p=d[1],b=ue(t.address).data;(0,h.useEffect)((function(){p(new Set(t.scopes))}),[t.scopes]);return(0,l.BX)(l.HY,{children:[(0,l.tZ)("div",{sx:_e.accountListItem,children:(0,l.BX)("div",{sx:_e.accountButtonContainer,children:[(0,l.BX)(pe.Z,{variant:"unstyled",sx:_e.chooseAccountButton,onClick:function(){(0,Ie.E)(c,t,f,a).catch((function(e){return console.error(e)}))},children:[(0,l.tZ)(V.Z,{address:t.address,seed:u,sxStyles:_e.accountImage,flowAccountAddress:o,avatarUrl:i}),(0,l.BX)("div",{sx:_e.chooseAccountButtonText,children:[(0,l.BX)("div",{children:[t.label||t.address,r&&(0,l.tZ)("span",{sx:_e.isNew,children:"New"})]}),(0,l.tZ)("code",{sx:_e.chooseAccountAddress,children:t.address}),(0,l.BX)("code",{sx:_e.chooseAccountFlow,children:[null!==b&&void 0!==b&&b.balance?fe(b.balance):"0",(0,l.tZ)("div",{sx:_e.chooseAccountFlowLabel,children:"FLOW"})]})]})]}),(0,l.tZ)(s.kC,{ml:"auto",children:(0,l.tZ)(pe.Z,{variant:"link",onClick:function(){return n(t)},sx:_e.manageAccountButton,children:"Manage"})})]})}),(0,l.tZ)(F.Ge.hr,{sx:{m:0}})]})}var Ee={button:{textTransform:"none",paddingLeft:0,justifyContent:"flex-start",backgroundColor:"transparent",fontWeight:600},icon:{backgroundColor:"green",display:"flex",alignItems:"center",justifyContent:"center",width:50,height:50,borderRadius:50,marginRight:3,fontFamily:"inherit",fontWeight:"normal"}};function Re(e){var t=e.onClick,n=e.disabled,r=e.children;return(0,l.BX)(pe.Z,{variant:"unstyled",size:"sm",onClick:t,sx:Ee.button,block:!0,disabled:n,children:[(0,l.tZ)("div",{sx:Ee.icon,children:(0,l.tZ)("img",{src:"/plus-icon.svg"})}),r]})}var Le={accountCreated:{backgroundColor:"#00EF8B1A",border:"1px solid #00EF8B",textAlign:"center",py:10,px:3,mb:3},plusButtonContainer:{height:90,display:"flex",alignItems:"center"},footer:{lineHeight:1.7,color:"gray.400",fontSize:0}};function Ue(e){var t=e.accounts,n=e.onEditAccount,r=e.createdAccountAddress,o=e.flowAccountAddress,c=e.flowAccountPrivateKey,i=e.avatarUrl,a=X().initError;return(0,l.BX)("div",{children:[(0,l.tZ)(s.xu,{mb:4,children:(0,l.tZ)(te,{description:"Select an existing account to log in or create a new account.",flowAccountAddress:o,avatarUrl:i})}),r&&(0,l.tZ)("div",{sx:Le.accountCreated,children:(0,l.tZ)("b",{children:"Account Created"})}),a?(0,l.tZ)(oe,{errors:[a]}):(0,l.BX)(l.HY,{children:[(0,l.tZ)(s.xu,{children:t.map((function(e){return(0,l.tZ)(De,{account:e,onEditAccount:n,isNew:e.address===r,flowAccountAddress:o,flowAccountPrivateKey:c,avatarUrl:i},e.address)}))}),(0,l.tZ)(s.xu,{sx:Le.plusButtonContainer,children:(0,l.tZ)(Re,{onClick:function(){return n({type:"ACCOUNT",label:S(t.length-1),scopes:[]})},children:"Create New Account"})}),(0,l.tZ)(F.Ge.hr,{sx:{mt:0,mb:4}})]})]})}var ze=n(6520);function Xe(e){var t=e.error;return null==t?null:(0,L.jsx)("div",{children:(0,L.jsx)("pre",{children:t.stack})})}var Fe=n(1117);function We(e){var t=e.flowAccountAddress,n=e.flowAccountPrivateKey,r=e.avatarUrl,o=(0,h.useState)(null),c=o[0],i=o[1],a=(0,ze.Z)(),s=a.data,u=a.error,d=a.isLoading,f=a.refresh,p=(0,h.useState)(null),b=p[0],g=p[1];return!s&&u?(0,l.tZ)(Xe,{error:u}):!s||d?null:(0,l.tZ)(ne.Z,{root:!0,children:c?(0,l.tZ)(Be,{account:c,onSubmitComplete:function(e){i(null),e&&(g(e),f())},onCancel:function(){return i(null)},flowAccountAddress:t,avatarUrl:r}):(0,l.tZ)("div",{sx:ne.W.body,children:(0,l.tZ)(Ue,{accounts:s,onEditAccount:function(e){g(null),i(e)},createdAccountAddress:b,flowAccountAddress:t,flowAccountPrivateKey:n,avatarUrl:r})})})}function Ne(e){var t=e.avatarUrl,n=(0,Fe.Z)(),r=n.flowAccountAddress,o=n.flowAccountPrivateKey;return(0,l.tZ)(z,{children:(0,l.tZ)(We,{flowAccountAddress:r,flowAccountPrivateKey:o,avatarUrl:t})})}Ne.getInitialProps=(0,r.Z)(c().mark((function e(){var t,n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,y.default)(),n=t.publicRuntimeConfig,e.abrupt("return",{avatarUrl:n.avatarUrl});case 2:case"end":return e.stop()}}),e)})));var Te=Ne},7255:function(e,t,n){"use strict";n.d(t,{E:function(){return A},O:function(){return O}});var r=n(29),o=n(7794),c=n.n(o),i=n(9046),a=n(6917),s=n(1752),l=n(9499),u=n(7812);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p=new Set("name family_name given_name middle_name nickname preferred_username profile picture website gender birthday zoneinfo locale updated_at".trim().split(/\s+/)),h=new Set("email email_verified".trim().split(/\s+/)),b=function(e,t){return new Set((0,u.Z)(e).filter((function(e){return t.has(e)})))};function g(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[e].flatMap((function(e){return e})).filter(Boolean);return Object.fromEntries(t)}var v=function(e,t,n){return e.has(t)&&[t,n]},m=function(e){var t,n=e.baseUrl,r=e.address,o=e.nonce,c=e.scopes,i=e.compSig,a=e.keyId,s=e.includeRefresh,l=void 0!==s&&s,u=[{f_type:"Service",f_vsn:"1.0.0",type:"authn",uid:"fcl-dev-wallet#authn",endpoint:"".concat(n,"/fcl/authn"),id:r,identity:{address:r},provider:{address:null,name:"FCL Dev Wallet",icon:null,description:"For Local Development Only"}},{f_type:"Service",f_vsn:"1.0.0",type:"authz",uid:"fcl-dev-wallet#authz",endpoint:"".concat(n,"/fcl/authz"),method:"IFRAME/RPC",identity:{address:r,keyId:Number(a)}},{f_type:"Service",f_vsn:"1.0.0",type:"user-signature",uid:"fcl-dev-wallet#user-sig",endpoint:"".concat(n,"/fcl/user-sig"),method:"IFRAME/RPC",id:r,data:{addr:r,keyId:Number(a)},params:{}}];o&&u.push({f_type:"Service",f_vsn:"1.0.0",type:"account-proof",method:"DATA",uid:"fcl-dev-wallet#account-proof",data:{f_type:"account-proof",f_vsn:"1.0.0",address:r,nonce:o,signatures:null!==(t=[i])&&void 0!==t?t:null}});return l&&u.push({f_type:"Service",f_vsn:"1.0.0",type:"authn-refresh",uid:"fcl-dev-wallet#authn-refresh",endpoint:"".concat(n,"/fcl/authn-refresh"),method:"IFRAME/RPC",id:r,data:{f_type:"authn-refresh",f_vsn:"1.0.0",address:r,keyId:Number(a)},params:{sessionId:"C7OXWaVpU-efRymW7a5d",scopes:Array.from(c).join(" ")}}),c.size&&u.push({f_type:"Service",f_vsn:"1.0.0",type:"open-id",uid:"fcl-dev-wallet#open-id",method:"data",data:f({f_type:"OpenID",f_vsn:"1.0.0"},g([b(p,c).size&&["profile",g([v(c,"name","name[".concat(r,"]")),v(c,"family_name","family_name[".concat(r,"]")),v(c,"given_name","given_name[".concat(r,"]")),v(c,"middle_name","middle_name[".concat(r,"]")),v(c,"nickname","nickname[".concat(r,"]")),v(c,"preferred_username","preferred_username[".concat(r,"]")),v(c,"profile","https://onflow.org"),v(c,"piture","https://https://avatars.onflow.org/avatar/".concat(r)),v(c,"website","https://onflow.org"),v(c,"gender","gender[".concat(r,"]")),v(c,"birthday","0000-".concat((new Date).getMonth()+1,"-").concat((new Date).getDate())),v(c,"zoneinfo","America/Vancouver"),v(c,"locale","en"),v(c,"updated_at",Date.now())])],b(h,c).size&&["email",g([v(c,"email","".concat(r,"@example.com")),v(c,"email_verified",!0)])]]))}),u},y=(0,s.default)().publicRuntimeConfig,x=function(e,t){return(0,a.X)(e,i.WalletUtils.encodeAccountProof(t))};function w(e,t,n,r,o){return{addr:t,keyId:n,signature:x(e,{address:t,nonce:r,appIdentifier:o})}}function O(e,t,n,r,o,c){var a=x(e,{address:t,nonce:o,appIdentifier:c}),s=new i.WalletUtils.CompositeSignature(t,n,a),l=m({baseUrl:y.baseUrl,address:t,nonce:o,scopes:r,compSig:s,keyId:n,includeRefresh:!1});i.WalletUtils.approve({f_type:"AuthnResponse",f_vsn:"1.0.0",addr:t,services:l})}function A(e,t,n,r){return Z.apply(this,arguments)}function Z(){return(Z=(0,r.Z)(c().mark((function e(t,n,r,o){var a,s,l,u,d,f,p,h,b,g;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=n.address,s=n.keyId,l=o.body,u=l.nonce,d=l.appIdentifier,u&&(p=w(t,a,s,u,d),h=p.addr,b=p.signature,f=new i.WalletUtils.CompositeSignature(h,s,b)),g=m({baseUrl:y.baseUrl,address:a,nonce:u,scopes:r,compSig:f,keyId:s,includeRefresh:!1}),localStorage.setItem("connectedAppConfig",JSON.stringify(o)),i.WalletUtils.sendMsgToFCL("FCL:VIEW:RESPONSE",{addr:a,services:g});case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},2626:function(e,t,n){"use strict";n.d(t,{v:function(){return r}});var r=function(e){var t,n;return null!==(t=null===e||void 0===e||null===(n=e.trim())||void 0===n?void 0:n.split(/\s+/))&&void 0!==t?t:[]}},508:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/fcl/authn",function(){return n(8535)}])}},function(e){e.O(0,[184,325,60,313,774,888,179],(function(){return t=508,e(e.s=t);var t}));var t=e.O();_N_E=t}]);
//# sourceMappingURL=authn-e9ec12162e66f03d.js.map